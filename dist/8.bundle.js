webpackJsonp([8],{117:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function u(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(u,s)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(u=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(o,n[1])).done)return u;switch(o=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(u=l.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){l.label=n[1];break}if(6===n[0]&&l.label<u[1]){l.label=u[1],u=n;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(n);break}u[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],o=0}finally{i=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,u,s,l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),s=n(0),l=n(17),a=n(8),c=n(14),p="298e76f22d7d48599566e383b9842d53",h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e.fetchNews=function(t){var n=t.publisher;return i(e,void 0,void 0,function(){var t,e,r=this;return o(this,function(i){switch(i.label){case 0:return t="https://newsapi.org/v1/articles?source="+n+"&apiKey="+p,[4,fetch(t).then(function(t){return t.json()})];case 1:if(e=i.sent(),e.articles.length>0)try{this.saveToGraphCool(e.articles[0],e.source),e.articles.map(function(t){r.saveToGraphCool(t,e.source)})}catch(t){console.info(t)}return[2]}})})},e.saveToGraphCool=function(t,n){return i(e,void 0,void 0,function(){var e,r;return o(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.props.addNewsArticle({variables:{author:t.author,title:t.title,description:t.description,publishedAt:t.publishedAt,publishedBy:n,url:t.url,urlToImage:t.urlToImage}})];case 1:return e=i.sent(),console.info("Just added this article: "+e.data.createNewsArticle.title),[3,3];case 2:return r=i.sent(),console.info("Article already exists on GraphCool"),[3,3];case 3:return[2,e]}})})},e.handleClick=function(){e.fetchNews({publisher:e.props.newsPublisher})},e}return r(e,t),e.prototype.componentDidMount=function(){this.fetchNews({publisher:this.props.newsPublisher})},e.prototype.componentWillUpdate=function(t,e){},e.prototype.render=function(){return u.createElement("div",{className:"scrape_news",style:{position:"fixed",bottom:20,right:110,zIndex:6}},u.createElement("button",{onClick:this.handleClick},"Scrape More News"))},e}(s.Component),d=(y=["\nmutation(\n  $author: String!,\n  $title: String!,\n  $description: String!,\n  $publishedAt: String!,\n  $publishedBy: String!,\n  $url: String!,\n  $urlToImage: String!,\n) {\n  createNewsArticle(\n    author: $author,\n    title: $title,\n    description: $description,\n    publishedAt: $publishedAt,\n    publishedBy: $publishedBy,\n    url: $url,\n    urlToImage: $urlToImage,\n  ) {\n    id\n    title\n    author\n  }\n}\n"],y.raw=["\nmutation(\n  $author: String!,\n  $title: String!,\n  $description: String!,\n  $publishedAt: String!,\n  $publishedBy: String!,\n  $url: String!,\n  $urlToImage: String!,\n) {\n  createNewsArticle(\n    author: $author,\n    title: $title,\n    description: $description,\n    publishedAt: $publishedAt,\n    publishedBy: $publishedBy,\n    url: $url,\n    urlToImage: $urlToImage,\n  ) {\n    id\n    title\n    author\n  }\n}\n"],a.default(y)),f=function(t){return{dispatch:t}},b=function(t){return{newsPublisher:t.reduxUser.newsPublisher}};e.default=c.compose(c.graphql(d,{name:"addNewsArticle"}),l.connect(b,f))(h);var y}});